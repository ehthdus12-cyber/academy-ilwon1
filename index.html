<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>강남일원독서실 아카데미</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700;900&display=swap" rel="stylesheet">
    <style>
        :root { --blue: #2563eb; --bg: #f8fafc; }
        body { font-family: 'Noto Sans KR', sans-serif; background-color: var(--bg); margin: 0; letter-spacing: -0.02em; color: #1e293b; }
        header { background: white; padding: 15px 20px; border-bottom: 1px solid #e2e8f0; display: flex; justify-content: space-between; align-items: center; sticky top: 0; z-index: 100; }
        .logo { color: var(--blue); font-weight: 900; font-size: 1.1rem; cursor: pointer; }
        .nav-btn { font-size: 12px; font-weight: bold; padding: 8px 16px; border-radius: 12px; border: 1px solid #e2e8f0; background: #f8fafc; cursor: pointer; }
        .container { max-width: 500px; margin: 20px auto; padding: 0 16px; }
        .card { background: white; border-radius: 30px; overflow: hidden; box-shadow: 0 10px 25px rgba(0,0,0,0.05); border: 1px solid #f1f5f9; margin-bottom: 20px; }
        .header-box { background: var(--blue); color: white; padding: 35px 20px; text-align: center; }
        .header-box h2 { margin: 5px 0 0; font-weight: 900; font-size: 1.5rem; }
        .form-body { padding: 30px; }
        .form-group { margin-bottom: 18px; }
        label { display: block; font-size: 12px; font-weight: 700; color: #64748b; margin: 0 0 8px 4px; }
        input, select { width: 100%; padding: 15px; border: 1px solid #f1f5f9; border-radius: 15px; background: #f8fafc; font-size: 15px; box-sizing: border-box; outline: none; transition: 0.2s; }
        input:focus { border-color: var(--blue); background: white; box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.1); }
        .is-existing-tag { display: inline-block; font-size: 10px; font-weight: 900; padding: 3px 8px; border-radius: 6px; margin-top: 5px; }
        .tag-yes { background: #dcfce7; color: #166534; }
        .tag-no { background: #dbeafe; color: #1e40af; }
        .price-card { background: #eff6ff; padding: 20px; border-radius: 20px; display: flex; justify-content: space-between; align-items: center; margin: 25px 0; border: 1px solid #dbeafe; }
        .price-value { font-size: 24px; font-weight: 900; color: var(--blue); }
        .submit-btn { width: 100%; padding: 20px; background: var(--blue); color: white; border: none; border-radius: 20px; font-weight: 900; font-size: 1.1rem; cursor: pointer; box-shadow: 0 8px 15px rgba(37, 99, 235, 0.2); }
        /* 관리자 화면 스타일 */
        .admin-section { display: none; background: white; padding: 20px; border-radius: 20px; border: 1px solid #e2e8f0; }
        .tab-menu { display: flex; gap: 5px; margin-bottom: 15px; background: #f1f5f9; padding: 5px; border-radius: 12px; }
        .tab-item { flex: 1; text-align: center; padding: 10px; font-size: 12px; font-weight: bold; border-radius: 8px; cursor: pointer; }
        .tab-active { background: white; color: var(--blue); box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .list-item { padding: 15px; border-bottom: 1px solid #f1f5f9; font-size: 13px; }
    </style>
</head>
<body>

<header>
    <div class="logo" onclick="location.reload()">강남일원독서실</div>
    <div class="nav-btn" onclick="openAdmin()">시스템 관리</div>
</header>

<div class="container" id="main-view">
    <div class="card">
        <div class="header-box">
            <p style="font-size: 12px; opacity: 0.9; margin:0;">2026년 03월 시즌</p>
            <h2>아카데미 수강신청</h2>
        </div>
        <form class="form-body" onsubmit="handleApply(event)">
            <div class="form-group">
                <label>수강생 성함</label>
                <input type="text" id="name" placeholder="실명을 입력하세요" required>
            </div>
            <div class="form-group">
                <label>연락처 (기존 수강생 자동인식)</label>
                <input type="tel" id="phone" placeholder="010-0000-0000" oninput="checkExisting(this.value)" required>
                <div id="status-tag"></div>
            </div>
            <div class="form-group">
                <label>과목 선택</label>
                <select id="course" onchange="updatePrice()" required>
                    <option value="">과목을 선택해주세요</option>
                    <option value="40000">AI스마트폰활용 (40,000원)</option>
                    <option value="40000">연필풍경스케치 (40,000원)</option>
                    <option value="40000">보타니컬아트 (40,000원)</option>
                    <option value="30000">창의논술 (30,000원)</option>
                    <option value="50000">중급리딩 (50,000원)</option>
                </select>
            </div>
            <div class="price-card">
                <span style="font-weight: 800; font-size: 13px;">최종 결제 금액</span>
                <span class="price-value" id="final-price">0원</span>
            </div>
            <button type="submit" class="submit-btn">신청하기</button>
        </form>
    </div>
</div>

<div class="container" id="admin-view" style="display:none;">
    <div class="tab-menu">
        <div class="tab-item tab-active" onclick="switchTab('apps')">접수내역</div>
        <div class="tab-item" onclick="switchTab('settings')">기간설정</div>
        <div class="tab-item" onclick="location.reload()">나가기</div>
    </div>
    <div class="admin-section" id="tab-apps" style="display:block;">
        <h4 style="margin-top:0;">신청자 명단</h4>
        <div id="app-list">접수된 내역이 없습니다.</div>
    </div>
    <div class="admin-section" id="tab-settings">
        <h4>시즌 설정</h4>
        <label>대상 월</label>
        <input type="text" value="2026년 03월" style="margin-bottom:10px;">
        <label>접수 기간</label>
        <input type="date" style="margin-bottom:5px;">
        <button class="nav-btn" style="width:100%; background:var(--blue); color:white; border:none; padding:15px;">설정 저장</button>
    </div>
</div>

<script>
    // 기존 수강생 가상 데이터 (실제 운영시에는 이 리스트를 수정)
    const existingStudents = ["010-1234-5678", "010-8740-5400", "010-1111-2222"];
    let applications = [];

    // 기존 수강생 체크 로직
    function checkExisting(val) {
        const tag = document.getElementById('status-tag');
        if (val.length >= 13) {
            if (existingStudents.includes(val)) {
                tag.innerHTML = '<span class="is-existing-tag tag-yes">✓ 기존 수강생 우선접수 대상</span>';
            } else {
                tag.innerHTML = '<span class="is-existing-tag tag-no">신규 수강생</span>';
            }
        } else {
            tag.innerHTML = '';
        }
    }

    function updatePrice() {
        const p = document.getElementById('course').value;
        document.getElementById('final-price').innerText = p ? Number(p).toLocaleString() + '원' : '0원';
    }

    function handleApply(e) {
        e.preventDefault();
        const name = document.getElementById('name').value;
        const phone = document.getElementById('phone').value;
        const course = document.getElementById('course');
        const courseName = course.options[course.selectedIndex].text;

        const newApp = { name, phone, courseName, date: new Date().toLocaleString() };
        applications.push(newApp);

        alert(name + "님, 신청이 접수되었습니다.\n\n계좌: 우리은행 1005-204-639684\n예금주: 강남일원독서실");
        location.reload();
    }

    function openAdmin() {
        if(prompt("관리자 암호를 입력하세요") === "874054") {
            document.getElementById('main-view').style.display = 'none';
            document.getElementById('admin-view').style.display = 'block';
            renderApps();
        }
    }

    function switchTab(tab) {
        document.querySelectorAll('.tab-item').forEach(el => el.classList.remove('tab-active'));
        document.querySelectorAll('.admin-section').forEach(el => el.style.display = 'none');
        if(tab === 'apps') document.getElementById('tab-apps').style.display = 'block';
        if(tab === 'settings') document.getElementById('tab-settings').style.display = 'block';
        event.currentTarget.classList.add('tab-active');
    }

    function renderApps() {
        const list = document.getElementById('app-list');
        if(applications.length === 0) {
            list.innerHTML = "<p style='color:#94a3b8; font-size:12px;'>내역이 없습니다.</p>";
            return;
        }
        list.innerHTML = applications.map(a => `
            <div class="list-item">
                <b>${a.name}</b> (${a.phone})<br>
                <span style="color:var(--blue)">${a.courseName}</span><br>
                <small style="color:#94a3b8">${a.date}</small>
            </div>
        `).join('');
    }
</script>
</body>
</html>
