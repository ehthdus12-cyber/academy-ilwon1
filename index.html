<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>강남일원독서실 수강신청 시스템</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans KR', sans-serif; background-color: #f8fafc; letter-spacing: -0.02em; }
        .font-bold-title { font-weight: 900; letter-spacing: -0.04em; }
        .custom-scrollbar::-webkit-scrollbar { width: 5px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #e2e8f0; border-radius: 10px; }
    </style>
</head>
<body class="min-h-screen pb-20">

<div id="app-root">
    <header class="bg-white border-b border-gray-100 sticky top-0 z-30 shadow-sm">
        <div class="max-w-xl mx-auto px-4 py-4 flex justify-between items-center">
            <h1 class="text-xl font-bold-title text-blue-600 cursor-pointer" onclick="location.reload()">강남일원독서실</h1>
            <div class="flex gap-2">
                <button onclick="setView('search')" class="text-xs font-bold text-gray-600 bg-gray-50 px-3 py-2 rounded-xl border">조회</button>
                <button onclick="handleAdminAuth()" class="text-xs font-bold bg-blue-600 text-white px-3 py-2 rounded-xl shadow-sm">관리</button>
            </div>
        </div>
    </header>

    <main class="max-w-xl mx-auto px-4 mt-8" id="view-container">
        <div id="view-form" class="bg-white rounded-3xl shadow-xl overflow-hidden border border-gray-100 transition-all">
            <div class="bg-blue-600 p-8 text-white text-center">
                <p class="text-sm opacity-90 mb-1 font-medium italic">지식과 꿈이 자라는 공간! 강남일원독서실</p>
                <h2 class="text-2xl font-bold-title tracking-tight">청소년 / 성인아카데미 수강신청</h2>
            </div>
            <form onsubmit="handleFormSubmit(event)" class="p-8 space-y-6">
                <div class="space-y-1.5">
                    <label class="text-xs font-bold text-gray-500 ml-1">수강생명</label>
                    <input type="text" id="name" required placeholder="이름 입력" class="w-full p-4 bg-gray-50 border border-gray-100 rounded-2xl outline-none focus:ring-2 focus:ring-blue-500">
                </div>
                <div class="space-y-1.5">
                    <label class="text-xs font-bold text-gray-500 ml-1">연락처</label>
                    <input type="tel" id="phone" required placeholder="010-0000-0000" oninput="onPhoneInput(this.value)" class="w-full p-4 bg-gray-50 border border-gray-100 rounded-2xl outline-none focus:ring-2 focus:ring-blue-500 font-mono">
                    <div id="existing-badge"></div>
                </div>
                <div class="space-y-1.5">
                    <label class="text-xs font-bold text-gray-500 ml-1">생년월일</label>
                    <input type="text" id="birth" required placeholder="2015-05-20" oninput="onBirthInput(this.value)" class="w-full p-4 bg-gray-50 border border-gray-100 rounded-2xl outline-none focus:ring-2 focus:ring-blue-500 font-mono">
                </div>
                <div class="space-y-1.5">
                    <label class="text-xs font-bold text-gray-500 ml-1">과목 선택</label>
                    <select id="course" required onchange="calculatePrice()" class="w-full p-4 bg-gray-50 border border-gray-100 rounded-2xl outline-none focus:ring-2 focus:ring-blue-500 font-bold">
                        <option value="">생년월일을 먼저 입력하세요</option>
                    </select>
                </div>
                <div class="space-y-1.5">
                    <label class="text-xs font-bold text-gray-500 ml-1">감면 혜택</label>
                    <select id="discount" onchange="calculatePrice()" class="w-full p-4 bg-gray-50 border border-gray-100 rounded-2xl outline-none">
                        <option value="0">해당없음</option>
                        <option value="0.3">30% 감면 (다자녀/다강좌)</option>
                        <option value="0.5">50% 감면 (수급자/장애인/유공자)</option>
                    </select>
                </div>
                <div class="bg-blue-50 rounded-2xl p-5 flex justify-between items-center border border-blue-100">
                    <span class="text-xs font-bold text-blue-800">최종 납부 금액</span>
                    <span id="final-price" class="text-2xl font-black text-blue-600">0원</span>
                </div>
                <button type="submit" class="w-full py-5 bg-blue-600 text-white font-black rounded-2xl shadow-lg active:scale-95 text-xl">수강 신청하기</button>
            </form>
        </div>

        <div id="view-admin" class="hidden space-y-6">
            <div class="bg-white rounded-3xl border shadow-sm p-3 flex gap-2 font-bold">
                <button onclick="setAdminTab('apps')" id="btn-tab-apps" class="flex-1 py-3 rounded-2xl transition-all bg-blue-600 text-white">접수내역</button>
                <button onclick="setAdminTab('students')" id="btn-tab-students" class="flex-1 py-3 rounded-2xl transition-all bg-gray-50 text-gray-500">학생관리</button>
                <button onclick="setAdminTab('settings')" id="btn-tab-settings" class="flex-1 py-3 rounded-2xl transition-all bg-gray-50 text-gray-500">기간설정</button>
            </div>
            <div id="admin-content" class="min-h-[400px]"></div>
        </div>
    </main>
</div>

<script>
    // --- 초기 데이터 및 로직 ---
    const existingStudents = ["010-1234-5678", "010-8740-5400"];
    const courses = [
        { id: 'adult_1', name: 'AI스마트폰활용', price: 40000, type: 'adult' },
        { id: 'adult_2', name: '연필풍경스케치', price: 40000, type: 'adult' },
        { id: 'youth_1', name: '창의미술 (초1~3)', price: 30000, type: 'youth' },
        { id: 'youth_2', name: '창의논술 A (초1~2)', price: 30000, type: 'youth' },
        { id: 'youth_3', name: '중급리딩 (초1~6)', price: 50000, type: 'youth' }
    ];
    let applications = [];

    // --- 유틸리티 및 폼 핸들러 ---
    function setView(view) {
        document.querySelectorAll('#view-container > div').forEach(el => el.classList.add('hidden'));
        document.getElementById('view-' + view).classList.remove('hidden');
    }

    function onPhoneInput(val) {
        const badge = document.getElementById('existing-badge');
        if (existingStudents.includes(val)) {
            badge.innerHTML = '<p class="text-[10px] font-bold px-2 py-1 rounded-lg bg-green-100 text-green-700 inline-block mt-1">✓ 기존 수강생(우선접수 대상)</p>';
        } else { badge.innerHTML = ''; }
    }

    function onBirthInput(val) {
        const year = parseInt(val.split('-')[0]);
        if (!year) return;
        const type = year <= 2007 ? 'adult' : 'youth';
        const select = document.getElementById('course');
        let options = '<option value="">과목을 선택하세요</option>';
        courses.filter(c => c.type === type).forEach(c => {
            options += `<option value="${c.price}">${c.name} (${c.price.toLocaleString()}원)</option>`;
        });
        select.innerHTML = options;
    }

    function calculatePrice() {
        const base = parseInt(document.getElementById('course').value) || 0;
        const discount = parseFloat(document.getElementById('discount').value);
        const final = base * (1 - discount);
        document.getElementById('final-price').innerText = final.toLocaleString() + '원';
    }

    function handleFormSubmit(e) {
        e.preventDefault();
        const app = {
            name: document.getElementById('name').value,
            phone: document.getElementById('phone').value,
            course: document.getElementById('course').options[document.getElementById('course').selectedIndex].text,
            price: document.getElementById('final-price').innerText,
            date: new Date().toLocaleString()
        };
        applications.push(app);
        alert(`${app.name}님 신청 완료!\n\n계좌: 우리은행 1005-204-639684\n예금주: 강남일원독서실`);
        location.reload();
    }

    // --- 관리자 로직 ---
    function handleAdminAuth() {
        if (prompt("관리자 암호를 입력하세요.") === "874054") {
            setView('admin');
            setAdminTab('apps');
        } else { alert("비밀번호가 틀렸습니다."); }
    }

    function setAdminTab(tab) {
        const content = document.getElementById('admin-content');
        document.querySelectorAll('#view-admin button').forEach(b => {
            b.classList.replace('bg-blue-600', 'bg-gray-50');
            b.classList.replace('text-white', 'text-gray-500');
        });
        const activeBtn = document.getElementById('btn-tab-' + tab);
        activeBtn.classList.replace('bg-gray-50', 'bg-blue-600');
        activeBtn.classList.replace('text-gray-500', 'text-white');

        if (tab === 'apps') {
            content.innerHTML = applications.length ? 
                `<div class="space-y-4">${applications.map(a => `<div class="bg-white p-4 border rounded-2xl shadow-sm"><b>${a.name}</b><br><span class="text-blue-600 text-sm font-bold">${a.course}</span><br><span class="text-xs text-gray-400">${a.date}</span></div>`).join('')}</div>` : 
                '<p class="text-center text-gray-400 pt-10 font-bold">접수 내역이 없습니다.</p>';
        } else if (tab === 'students') {
            content.innerHTML = '<div class="bg-white p-6 border rounded-3xl shadow-sm font-bold"><h3 class="mb-4">기존 수강생 명단</h3><p class="text-sm text-gray-500">리스트 출력 및 삭제 기능 활성화됨</p></div>';
        } else if (tab === 'settings') {
            content.innerHTML = '<div class="bg-white p-6 border rounded-3xl shadow-sm font-bold"><h3 class="mb-4">운영 시즌 설정</h3><input type="text" value="2026년 03월" class="w-full p-4 bg-gray-50 border rounded-2xl mb-4"><button class="w-full py-4 bg-blue-600 text-white rounded-2xl">저장하기</button></div>';
        }
    }
</script>
</body>
</html>
